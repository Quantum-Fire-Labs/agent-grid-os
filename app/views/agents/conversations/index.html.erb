<div class="agent-profile" data-status="<%= @agent.status %>">
  <%= render "agents/header", active_tab: "conversations" %>

  <div class="agent-profile-body">
    <div class="dashboard-actions" style="margin-bottom: 1rem;">
      <%= button_to "New Group Chat", agent_conversations_path(@agent), method: :post, class: "btn btn-primary btn-sm" %>
    </div>

    <% if @conversations.any? %>
      <div class="conversations-list">
        <% @conversations.each do |conversation| %>
          <%= link_to chat_path(conversation), class: "conversation-row" do %>
            <div class="conversation-row-left">
              <span class="conversation-kind-badge badge-<%= conversation.kind %>"><%= conversation.kind %></span>
              <div class="conversation-row-info">
                <span class="conversation-row-name"><%= conversation.display_name %></span>
                <% if (last = conversation.last_message) %>
                  <span class="conversation-row-preview"><%= truncate(last.content, length: 80) %></span>
                <% end %>
              </div>
            </div>
            <div class="conversation-row-right">
              <% if (last = conversation.last_message) %>
                <span class="conversation-row-time"><%= time_ago_in_words(last.created_at) %> ago</span>
              <% end %>
            </div>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state">
        <h2>No conversations yet</h2>
        <p>Start a conversation with <%= @agent.name %>.</p>
      </div>
    <% end %>
  </div>
</div>
