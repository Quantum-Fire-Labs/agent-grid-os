<div class="agent-profile" data-status="<%= @agent.status %>">
  <%= render "agents/header", active_tab: "details" %>

  <%# ── Content Cards ── %>
  <div class="agent-profile-body">
    <% if @agent.description.present? %>
      <div class="agent-profile-card">
        <div class="agent-profile-card-label">About</div>
        <p class="agent-profile-card-text"><%= @agent.description %></p>
      </div>
    <% end %>

    <div class="agent-profile-card-row">
      <div class="agent-profile-card">
        <div class="agent-profile-card-label">Personality</div>
        <% if @agent.personality.present? %>
          <p class="agent-profile-card-text"><%= @agent.personality %></p>
        <% else %>
          <p class="agent-profile-card-text agent-profile-card-empty">No personality configured</p>
        <% end %>
      </div>

      <div class="agent-profile-card">
        <div class="agent-profile-card-label">Instructions</div>
        <% if @agent.instructions.present? %>
          <div class="agent-profile-card-text agent-profile-instructions"><%= simple_format(@agent.instructions) %></div>
        <% else %>
          <p class="agent-profile-card-text agent-profile-card-empty">No instructions configured</p>
        <% end %>
      </div>
    </div>

    <% if can_admin_agent?(@agent) %>
      <div class="agent-profile-footer">
        <div class="agent-profile-meta-inline">
          <span class="agent-profile-meta-chip">
            <span class="agent-profile-meta-key">Network</span>
            <span class="agent-profile-meta-val"><%= @agent.network_mode.humanize %></span>
          </span>
          <span class="agent-profile-meta-chip">
            <span class="agent-profile-meta-key">Workspace</span>
            <span class="agent-profile-meta-val"><%= @agent.workspace_enabled? ? "Enabled" : "Disabled" %></span>
          </span>
          <span class="agent-profile-meta-chip">
            <span class="agent-profile-meta-key">Created</span>
            <span class="agent-profile-meta-val"><%= @agent.created_at.strftime("%b %-d, %Y") %></span>
          </span>
        </div>
        <div class="agent-profile-actions-row">
          <%= link_to "Clone", new_agent_clone_path(@agent), class: "btn btn-ghost btn-sm" %>
          <%= link_to "Wipe Memory", new_agent_memory_wipe_path(@agent), class: "btn btn-ghost btn-sm text-danger" %>
          <%= button_to "Factory Reset", agent_factory_reset_path(@agent), class: "btn btn-ghost btn-sm text-danger", data: { turbo_confirm: "Factory reset #{@agent.name}? This will wipe all memory, chats, custom apps, and workspace data. This cannot be undone." } %>
          <%= button_to "Delete Agent", agent_path(@agent), method: :delete, class: "btn btn-ghost btn-sm text-danger", data: { turbo_confirm: "Delete #{@agent.name}? This cannot be undone." } %>
        </div>
      </div>
    <% end %>
  </div>
</div>
